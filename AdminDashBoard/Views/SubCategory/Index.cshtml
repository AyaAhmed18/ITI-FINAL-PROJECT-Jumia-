@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = "_Layout";
}
@model ResultDataForPagination<GetAllSubDto>

@{
    ViewData["Title"] = "Index";
}

@* <h1>@Model.count</h1> *@

<style>
    .fifty-chars {
        width: 20ch;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }
</style>
<div class="col-lg-12 grid-margin stretch-card">
    <div class="card">
        <div class="card-body">

        <h1>@AdminDashBoard.Languages.Resource.AllSubCategory</h1>
        <a asp-action="Create" asp-controller="SubCategory" class="btn btn-success p-3">@AdminDashBoard.Languages.Resource.AddSubCategory</a>
<div class="table-responsive pt-3">
<table class ="table table-bordered">
        <thead>
            <tr>
                    <th scope="col">@AdminDashBoard.Languages.Resource.Name</th>
                    <th scope="col">@AdminDashBoard.Languages.Resource.Description</th>
                    <th scope="col">@AdminDashBoard.Languages.Resource.Image</th>
                    <th scope="col">@AdminDashBoard.Languages.Resource.CategoryName</th>
                    <th scope="col">@AdminDashBoard.Languages.Resource.Action</th>
                    <th scope="col">@AdminDashBoard.Languages.Resource.Action</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Entities)
            {
                <tr>
                    <td>@item.Name</td>
                    @* <td class="fifty-chars">@item.Description</td> *@
                                <td class="p-1"><p class="fifty-chars">@item.Description</p> </td>

                                <td><img src="data:image;base64,@Convert.ToBase64String(item.Image)" width="100px" , height="100px" alt="SubCategory Image" /></td>
                    <td>@item.CategoryName</td>
                    <td>
                            <a asp-action="Update" asp-controller="SubCategory" asp-route-id="@item.Id" class="btn btn-info">@AdminDashBoard.Languages.Resource.Update</a>
                    </td>
                        <td>
                            <a asp-action="Delete" asp-controller="SubCategory" asp-route-id="@item.Id" onclick="confirmDelete()" style="pointer-events: auto;" class="btn btn-danger disabled">@AdminDashBoard.Languages.Resource.Delete</a>
                        </td>
                </tr>
            }
        </tbody>
    </table>
</div>
<div class="pagination">
            @if (Model.CurrentPage > 1)
            {
                <a href="@Url.Action("Index", new { pageNumber = Model.CurrentPage - 1, pageSize = Model.PageSize })" class="btn btn-warning">Previous</a>
            }

            @if (Model.TotalPages > 5 && Model.CurrentPage > 3)
            {
                <a href="@Url.Action("Index", new { pageNumber = 1, pageSize = Model.PageSize })" class="btn btn-default">1</a>
                <span>...</span>
            }

            @for (int i = Math.Max(1, (int)Model.CurrentPage - 2); i <= Math.Min((int)Model.TotalPages, (int)Model.CurrentPage + 2); i++)
            {
                <a href="@Url.Action("Index", new { pageNumber = i, pageSize = Model.PageSize })" class="btn @(Model.CurrentPage == i ? "btn-warning active" : "btn-default")">@i</a>
            }

            @if (Model.TotalPages > 5 && Model.CurrentPage < Model.TotalPages - 2)
            {
                <span>...</span>
                <a href="@Url.Action("Index", new { pageNumber = Model.TotalPages, pageSize = Model.PageSize })" class="btn btn-default">@Model.TotalPages</a>
            }

            @if (Model.CurrentPage < Model.TotalPages)
            {
                <a href="@Url.Action("Index", new { pageNumber = Model.CurrentPage + 1, pageSize = Model.PageSize })" class="btn btn-warning">Next</a>
            }
        </div>

   
    </div>
    </div>
    </div>





















   
    @if (TempData["SuccessMessage1"] != null)
    {
        <div class="alert alert-success alert-dismissible fixed-top align-items-center" role="alert" id="customAlert">
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            <svg class="bi flex-shrink-0 " width="24" height="15px" role="img" aria-label="Info:"><use xlink:href="#info-fill" /></svg>
            <div>
                @AdminDashBoard.Languages.Resource.SuccessMessage
            </div>
        </div>
    }
    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-danger alert-dismissible fixed-top align-items-center" role="alert" id="customAlert">
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            <svg class="bi flex-shrink-0 me0" width="24" height="15" role="img" aria-label="Info:"><use xlink:href="#info-fill" /></svg>
            <div>
                @AdminDashBoard.Languages.Resource.FailedTODelete
            </div>
        </div>
    }

   <script>
        // function confirmDelete() {
        //     $('#confirmDeleteModal').modal('show');
        // }
        function confirmDelete() {
            var acc = confirm("Other Products may depend on this SubCategory, You may not be able  to delete this Category?");
            if (acc == false) {
                event.preventDefault();
            }
        }
       
    </script>



